<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Quiz results</title>
<link rel="stylesheet" type="text/css" href="assets/css/themes/green.min.css" />
<link rel="stylesheet" type="text/css" href="assets/css/jquery.mobile.structure.css">
<link rel="stylesheet" type="text/css" href="assets/css/custom-styles.css">
<link rel="icon" type="image/png" href="assets/images/icons/favicon.png">
<script src="assets/js/jquery.min.js"></script>
<script src="assets/js/custom-scripts.js"></script>
<script src="assets/js/jquery.mobile.min.js"></script>
<script src="assets/js/jquery-json.js"></script>
<script src="assets/js/jstorage.js"></script>
<script>

function insert_value(){
var row = document.createElement("tr"),
    key = document.getElementById('key').value,
    val = document.getElementById('val').value;
if(!key){
    alert("KEY NEEDS TO BE SET!");
    document.getElementById('key').focus();
    return;
}
$.jStorage.set(key, val);
document.getElementById('key').value = "";
document.getElementById('val').value = "";
reDraw();
}

function get_value(){
var value = $.jStorage.get(document.getElementById("key2").value);
alert(value);
document.getElementById('key2').value = "";
}

function reDraw(){
var row, del, index;
var rows = document.getElementsByTagName("tr");
for(var i=rows.length-1; i>=0; i--){
    if(rows[i].className == "rida"){
        rows[i].parentNode.removeChild(rows[i]);
    }
}

index = $.jStorage.index();
for(var i=0; i<index.length;i++){
    row = document.createElement("tr");
    row.className = "rida";
    var t = document.createElement("td");
    t.innerHTML = index[i];
    row.appendChild(t);
    t = document.createElement("td");
    t.innerHTML  = $.jStorage.get(index[i]);
    row.appendChild(t);
    del = document.createElement("a");
    del.href = "javascript:void(0)";
    del.innerHTML = "DEL";
    (function(i){
        del.onclick = function(){
            $.jStorage.deleteKey(i);
            reDraw();
        };
    })(index[i])
    t = document.createElement("td");
    t.appendChild(del)
    row.appendChild(t);
    document.getElementById("tulemused").appendChild(row);

}
}
</script>
</head>
<body>
<div data-role="page">
  <div data-role="header" data-theme="b">
    <h1>Quiz results</h1>
  </div>
  <div data-role="content">
    <div class="content-primary" data-theme="c">
      <div class="container">
        <table cellspacing="0" cellpadding="4" border="1" >
          <thead>
            <tr>
              <td><h2>Topic</h2></td>
              <td><h2>Score</h2></td>
              <td>&nbsp;</td>
            </tr>
          </thead>
          <!--<tbody id="tulemused">
          </tbody>-->
          <tfoot>
            <tr>
              <td><input type="text" id="key" name="key" value=""></td>
              <td><input type="text" id="val" name="val" value=""></td>
              <td><a href="javascript:insert_value()">SET</a></td>
            </tr>
            <tr>
              <td><input type="text" id="key2" name="key2" value=""></td>
              <td></td>
              <td><a href="javascript:get_value()">GET</a></td>
            </tr>
          </tfoot>
        </table>
        Clicking "GET" alerts the value for provided key with the method <em>$.jStorage.get(key)</em>
        <script>reDraw()</script> 
      </div>
    </div>
    <!--<div class="content-secondary" data-theme="c"> </div>-->
  </div>
  <!-- /content--> 
  <!-- Fix position of footer on main nav pages. e.g. home -->
  <div data-role="footer" data-id="myfooter" data-position="fixed">
    <div data-role="navbar">
      <ul>
        <li><a href="index.html" data-role="button" data-icon="home" class="ui-btn-active ui-state-persist">Home</a> </li>
        <li><a href="glossary.html" data-role="button" data-icon="grid" data-prefetch>Glossary</a></li>
        <li><a href="quiz-menu.html" data-role="button" data-icon="check" data-prefetch>Quiz</a></li>
      </ul>
    </div>
    <!-- /navbar --> 
  </div>
  <!-- /footer --> 
</div>
<!-- /page -->

</body>
</html>